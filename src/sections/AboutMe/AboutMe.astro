---
import Column from "@components/Grid/Column.astro";
import Row from "@components/Grid/Row.astro";
import PrimarySkillsCard from "./elements/PrimarySkillsCard/PrimarySkillsCard.astro";
import CertificationsCard from "./elements/CertificationsCard/CertificationsCard.astro";
import FrameworksCard from "./elements/FrameworksCard/FrameworksCard.astro";
import DockerCard from "./elements/DockerCard/DockerCard.astro";
import FigmaCard from "./elements/FigmaCard/FigmaCard.astro";
import HomeAssistantCard from "./elements/HomeAssistantCard/HomeAssistantCard.astro";
---

<astro-about-me>
  <div class="row middle-xs">
    <div class="col-xs-1">
      <p class="vertical">About.</p>
    </div>
    <div class="text col-xs-offset-1 col-sm-offset-3 col-sm-7">
      <p>
        I am a <span class="highlight">Computer Science graduate</span> with a deep
        passion for technology. My solid foundation in computer science principles
        and programming languages allows me to quickly adapt to new tools and technologies.
      </p>
      <p class="highlight">
        â€” I prioritize user experience, consistently striving to design
        intuitive and enjoyable interfaces that enhance the user journey.
      </p>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-offset-1 col-xs">
      <p class="subtitle">A few more things...</p>
    </div>
  </div>
  <div class="grid">
    <div class="row">
      <div class="col-xs-offset-1 col-xs-4">
        <PrimarySkillsCard />
      </div>
      <div class="col-xs-4">
        <FrameworksCard />
      </div>
      <div class="col-xs-3">
        <CertificationsCard />
      </div>
    </div>
    <div class="row">
      <div class="col-xs-offset-1 col-xs-3">
        <DockerCard />
      </div>
      <div class="col-xs-3">
        <FigmaCard />
      </div>
      <div class="col-xs-5">
        <HomeAssistantCard />
      </div>
    </div>
  </div>
</astro-about-me>

<style lang="scss">
  @import "@styles/screens.scss";

  astro-about-me {
    width: 100%;
  }

  .text {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xl);
    line-height: 160%;
    font-size: var(--font-size-h3);

    @media screen and (max-width: $screen-sm-min) {
      font-size: var(--font-size-h4);
    }

    p {
      margin: 0;
    }

    .highlight {
      font-size: var(--font-size-h3);
      font-weight: 600;
    }
  }

  .vertical {
    color: #cac6e6;
    position: sticky;
    /* top: var(--spacing-3xl); */
    margin: 0;
    font-size: var(--font-size-h3);
    opacity: 1;
    text-align: center;
    writing-mode: vertical-rl;
    transform: rotate(-180deg);
  }

  .subtitle {
    margin-top: var(--spacing-5xl);
    margin-bottom: var(--spacing-3xl);
    font-size: var(--font-size-display);
    font-weight: 500;
  }

  .grid {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
  }
</style>

<script>
  import { vhPercent } from "@scripts/utils/gsap";
  import { gsap } from "gsap";

  class AboutMeContainer extends HTMLElement {
    constructor() {
      super();

      gsap.context(() => {
        const paragraphs = gsap.utils.toArray<HTMLElement>(".text > *");
        for (const p of paragraphs) {
          gsap.from(p, {
            ease: "expo.inOut",
            duration: 0.4,
            x: 30,
            opacity: 0,
            scrollTrigger: {
              trigger: p,
              start: "top " + vhPercent(70),
              toggleActions: "play none none reverse",
            },
          });
        }
      }, this);
    }
  }

  customElements.define("astro-about-me", AboutMeContainer);
</script>
